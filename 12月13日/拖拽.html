<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>拖拽</title>
	<style type="text/css">
	.box {
		width: 200px;
		height: 200px;
		border: 5px solid red;
		position: absolute;
	}
	</style>
</head>
<body>
	<div class="box" id="box">
		那年那你那是的那是的那年那你那是的那是的那年那你那是的那是的那年那你那是的那是的那年那你那是的那是的那年那你那是的那是的那年那你那是的那是的那年那你那是的那是的那年那你那是的那是的那年那你那是的那是的那年那你那是的那是的那年那你那是的那是的那年那你那是的那是的
	</div>
	<p>naninaninaninaninaninaninaninaninaninaninaninani</p>
</body>
<script type="text/javascript">
	function getStyle(tag,prop){
		var value;
		if (prop in document.body.style) {
			if (window.getComputedStyle) {
				value = document.defaultView.getComputedStyle(tag,null)[prop];
			}else{
				value = tag.currentStyle[prop];
			}
		}else {
			value = tag[prop];
		}
		value = parseFloat(value);
		if (isNaN(value)) {
			value = 0;
		}
		return value;
	}

	var box = document.getElementById("box");
	
	box.onmousedown = function (event){
		var e = event || window.event;
		if (e.preventDefault){
			e.preventDefault();
		}
		else {
			e.returnValue = false;
		}

		var moveX = getStyle(box,"left"),
			moveY = getStyle(box,"top"),
			moveMX = e.clientX,
			moveMY = e.clientY;
		document.onmousemove = function (event){
			var e = event || window.event;
			if (e.preventDefault){
				e.preventDefault();
			}
			else {
				e.returnValue = false;
			}
			var endX = e.clientX - moveMX + moveX,
				endY = e.clientY - moveMY + moveY;
			
			if (endX > 500) {
				endX = 500;
			}
			if (endX < 0 ) {
				endX = 0;
			}
			if (endY > 500) {
				endY = 500;
			}
			if (endY < 0) {
				endY = 0;
			};
			box.style.left = endX + "px";
			box.style.top = endY + "px";
		}
	}
	document.onmouseup = function (){
		document.onmousemove = null;
	}
</script>
</html>